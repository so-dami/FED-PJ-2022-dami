<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배열의 메서드 활용</title>
    <style>
        html,body {
            margin: 0;
            padding: 0;
        }

        h1,h2 {
            text-align: center;
        }

        .controler {
            padding: 15px;
            width: 100%;
            text-align: center;
        }

        .cont ul {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 0;
            padding: 0;
            list-style: none;
            overflow: hidden;
        }

        .cont li {
            width: 100px;
            height: 100px;
            border: 2px solid red;
            border-radius: 50%;
            margin: 10px;
            text-align: center;
            line-height: 100px;
            font-size: 25px;
            white-space: nowrap;
        }

        /* 배열정보 보이기 */
        .showit {
            padding: 15px;
            border: 4px dotted blue;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }

        /* 버튼 */
        .mbtn,#sel {
            font-size: 20px;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        /* 입력양식 */
        label,input,select {
            font-size: 20px;
        }
    </style>

    <script>
        // 요소 선택함수 //
        const qs = x => document.querySelector(x);
        const qsa = x => document.querySelectorAll(x);

        // 콘솔 찍기 함수 //
        const cg = x => console.log(x);

        /////////// 로드구역 ///////////////////////////
        window.addEventListener("DOMContentLoaded",()=>{

            console.log("complete");

            // 1. 배열변수 선언과 할당
            const fruit = ["배","사과","용과","딸기"];

            // 2. 과일명과 배경이미지명 매칭하기 -> 객체
            const frObj = {
                "배":"fruits_01",
                "사과":"fruits_02",
                "용과":"fruits_14",
                "딸기":"fruits_09",
                "두리안":"fruits_17",
                "바나나":"fruits_15",
                "수박":"fruits_12",
                "파인애플":"fruits_13",
                "망고":"fruits_24",
                "오렌지":"fruits_03",
                "체리":"fruits_05",
                "메론":"fruits_11",
                "블루베리":"fruits_20",
                "레몬":"fruits_04",
            }; // frObj 객체

            // 3. 대상 요소
                // 3-1. 배열 정보 출력: .showit
                const showit = qs(".showit");
                // 3-2. 배열로 이미지 출력: .cont
                const cont = qs(".cont");
                // 3-3. 조작 버튼 요소들: .mbtn
                const mbtn = qsa(".mbtn");
                // 3-4. 선택 박스: #sel
                const sel = qs("#sel");
                // 3-5. 함수 호출 확인
                // console.log(showit,cont,mbtn,sel);
            
            // 4. 처음 배열 출력하기
                // 4-1. 배열 출력 함수 만들기
                // [ 배열메서드1: join(); ]
                // join(구분자) -> 배열 사이에 구분자를 넣고 문자로 변환
                const showArr = () => {
                    showit.innerText = fruit.join("*");
                }; // showArr 함수
                
                // 4-2. 처음 배열 정보를 호출하여 찍기
                showArr();

            // 5. '과일 주세요' 버튼 클릭 시 배열 정보로 과일박스 만들고 해당 과일 이미지 출력하기
            mbtn[0].onclick = () => {
                // 5-1. 호출 확인
                cg("과일 주세요");
                // 5-2. 변경 내용: 배열의 과일만큼 ul>li를 만들어서 html로 .cont에 출력하기
                let hcode = "<ul>";
                    // forEach 메서드로 배열만큼 돌아서 li 만들기
                    // -> forEach((값,순번,객체)=>{코드})
                    // frObj[val]: 배열값과 같은 이름의 객체값 가져오기(과일 이미지명 정보)
                    fruit.forEach((val)=>{
                        hcode += `
                            <li style="
                            background:url(addimg/${frObj[val]}.png)
                            no-repeat center/cover">
                                ${val}
                            </li>
                        `;
                    }); // forEach

                hcode += "</ul>";

                // 5-3. 화면 출력
                cont.innerHTML = hcode;

            }; // click 함수

            // 6. 과일 이미지명 셋팅의 객체 속성명으로 과일 선택박스(#sel) 옵션 셋팅하기
            // -> 데이터 바인딩: 선택박스의 데이터를 만드는 것
                // 6-1. 대상: #sel -> sel 변수
                // 6-2. 지역변수화를 하여 셋팅하기
                // -> 바로 실행하는 함수 만들기
                // -> (함수)(): 자기 자신이 바로 실행됨
                (() => {
                    cg("바로 실행?");

                    // 임시 변수(코드 담기)
                    let temp = "";

                    // 객체를 위한 for문 사용 -> for in문
                        // 대상 객체: frObj
                        // 변수 x는 객체속성명이다.
                        // -> x는 과일명으로 모두 셋팅되어있다.
                        for(let x in frObj){
                            temp += `<option>${x}</option>`;
                        } // for in문

                    // 선택 박스에 코드 넣기
                    sel.innerHTML = temp;
                })(); // 바로 실행 함수

            // 7. '뒤 배열 추가' 버튼 클릭 시 현재 선택된 #sel 과일명을 맨 뒤에 추가함
            // 대상: mbtn[1]
            mbtn[1].onclick = () => {
                    // 7-1. 호출 확인
                    cg("뒤 배열 추가");

                    // 7-2. 선택 대상의 값을 배열 맨 뒤에 추가
                    // 선택 대상: #sel인 선택 박스의 값
                    // 배열의 맨 뒤 값 추가는?
                    // [ 배열메서드2: push(); ]
                    // -> 배열의 맨 뒤에 값을 추가함
                    fruit.push(sel.value);
                    // sel.value는 원래 value 속성값을 읽어옴
                    // 여기서는 value 속성이 없으므로 데이터값을 읽어옴
                    // -> 태그 사이의 값 == 데이터값

                    // 7-3. 배열 정보 화면에 출력하기
                    showArr();

                    // 7-4. 현재 배열 선택 박스 업데이트 함수 호출
                    makeSel();

            }; // click 함수

            // 8. '앞 배열 추가' 버튼 클릭 시 현재 선택된 #sel 과일명을 맨 앞에 추가함
            // 대상: mbtn[2]
            mbtn[2].onclick = () => {
                // 8-1. 호출 확인
                cg("앞 배열 추가");

                // 8-2. 선택 대상의 값을 배열 맨 앞에 추가
                // 선택 대상: #sel인 선택 박스의 값
                // 배열의 맨 앞 값 추가는?
                // [ 배열메서드3: unshift(); ]
                // -> 배열의 맨 앞에 값을 추가함
                fruit.unshift(sel.value);

                // 8-3. 배열 정보 화면에 출력하기
                showArr();

                // 8-4. 현재 배열 선택 박스 업데이트 함수 호출
                makeSel();

            }; // click 함수

            // 9. '뒤 배열 삭제' 버튼 클릭 시 맨 뒤 배열 값을 삭제함
            // 대상: mbtn[3]
            mbtn[3].onclick = () => {
                // 9-1. 호출 확인
                cg("뒤 배열 삭제");

                // 9-2. 맨 뒤 배열 값을 삭제
                // [ 배열메서드4: pop(); ]
                fruit.pop(sel.value);

                // 9-3. 배열 정보 화면에 출력하기
                showArr();

                // 9-4. 현재 배열 선택 박스 업데이트 함수 호출
                makeSel();

            }; // click 함수

            // 10. '앞 배열 삭제' 버튼 클릭 시 맨 앞 배열 값을 삭제함
            // 대상: mbtn[4]
            mbtn[4].onclick = () => {
                // 10-1. 호출 확인
                cg("앞 배열 삭제");

                // 10-2. 맨 앞 배열 값을 삭제
                // [ 배열메서드5: shift(); ]
                fruit.shift(sel.value);

                // 10-3. 배열 정보 화면에 출력하기
                showArr();

                // 10-4. 현재 배열 선택 박스 업데이트 함수 호출
                makeSel();

            }; // click 함수

        /*******************************************
            중간 배열 지우기 또는 넣기를 위해 현재 배열번호 선택박스와 지울 개수를 요소에 셋팅하기            
        *******************************************/
        // 대상 선정
        // 1. 현재 배열 선택 박스
        const anum = qs("#anum");
        // 2. 현재 개수 input 박스
        const delnum = qs("#delnum");

        // cg(delnum);

        /******************************************** 
        현재 배열을 선택 박스에 셋팅하는 함수
        ********************************************/
        const makeSel = () => {
            // 1. 호출 확인
            cg("hi",);
            // 2. 현재 배열 선택 박스에 업데이트 하기
                // 2-1. 변경 대상: anum 변수
                // 2-2. 데이터는 어디서? fruit 배열변수
                // 현재 배열 선택 박스 초기화
                anum.innerHTML = "";

                fruit.forEach((val,idx)=>{
                    anum.innerHTML += `
                        <option value="${idx}">${val}</option>
                    `;
                }); // forEach문
        }; // makeSel 함수

        // 최초 호출
        makeSel();

            // 11. '중간 배열 삭제' 버튼
            // 대상: mbtn[5]
            mbtn[5].onclick = () => {
                // 11-1. 호출 확인
                cg("중간 삭제");
                // 11-2. 중간 배열 삭제하기
                // [ 배열메서드6: splice(); ]
                // -> 삭제 시
                // splice(순번);: 순번 포함 순번 뒤의 모든 값을 지움
                // splice(순번.갯수);: 순번 포함 순번 뒤의 몇 개 지움

                // 순번은 현재 배열 선택 박스(anum)에서 선택하여 value에 있는 순번값을 가져옴

                // 만약 지울 값이 빈 값이거나 숫자가 아니면 선택 순번 포함하여 순번 뒤의 값까지 모두 지우기
                if(delnum.value =="" ||
                isNaN (delnum.value)){
                    fruit.splice(anum.value);
                } // if문
                
                else{ // delnum이 숫자이면 개수만큼 지우기
                    fruit.splice(anum.value,delnum.value);
                } // else
                
                // isNaN(값) -> 숫자가 아니면 true, 숫자면 false
                // is Not a Number? 숫자가 아니니?

                cg("순번:"+anum.value);
                cg("개수:"+delnum.value);

                // 11-3. 배열 정보 화면에 출력하기
                showArr();

                // 11-4. 현재 배열 선택 박스 업데이트 함수 호출
                makeSel();

            }; // click 함수

            // 12. '중간 배열 삽입' 버튼
            // 대상: mbtn[6]
            mbtn[6].onclick = () => {
                // 12-1. 호출 확인
                cg("중간 삽입");
                // 12-2. 중간 배열 삽입하기
                // [ 배열메서드7: splice(); ]
                // -> 삽입 시
                // splice(순번,0,넣을 값, 넣을 값,...);: 순번 뒤에 0을 쓰고 그 뒤에 넣을 값을 계속 넣을 수 있음
                // 선택 순번 앞에 배열값이 삽입됨

                // 순번은 현재 배열 선택 박스(anum)에서 선택하여 value에 있는 순번값을 가져옴

                // 넣을 과일 이름은 과일 선택 박스에서 선택
                // -> sel 변수
                fruit.splice(anum.value,0,sel.value);

                cg("순번:"+anum.value);
                cg("넣을 과일:"+sel.value)

                // 12-3. 배열 정보 화면에 출력하기
                showArr();

                // 12-4. 현재 배열 선택 박스 업데이트 함수 호출
                makeSel();

            }; // click 함수

        }); ////////// 로드구역 ////////////////////////
    </script>
</head>

<body>
    <h1>배열의 메서드 활용</h1>
    <!-- 배열 정보 보기 -->
    <h2>배열 정보 보기</h2>
    <div class="showit"></div>
    <!-- 컨트롤 버튼 -->
    <div class="controler">
        <!-- 과일기능버튼 -->
        <button class="mbtn">과일 주세요</button> <br>
        <button class="mbtn">뒤 배열 추가</button>
        <button class="mbtn">앞 배열 추가</button>
        <button class="mbtn">뒤 배열 삭제</button>
        <button class="mbtn">앞 배열 삭제</button> <br>

        <button class="mbtn">중간 배열 삭제</button>
        <label for="anum">선택 과일:</label>
        <select name="anum" id="anum">
            <option>0</option>
        </select>
        <label for="delnum">지울 개수:</label>
        <input type="text" id="delnum" value="1" maxlength="1">
        <br>

        <button class="mbtn">중간 배열 삽입</button>
        위의 선택 번호 사용+과일은 리스트에서 선택!
        <!-- 과일선택박스 -->
        <select name="sel" id="sel">
            <option>과일</option>
        </select>
    </div>
    <!-- 출력박스 -->
    <div class="cont"></div>
</body>

</html>